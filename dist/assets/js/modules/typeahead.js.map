{"version":3,"sources":["modules/typeahead.js"],"names":["instances","Typeahead","select","defaultOption","dataset","default","disabled","getAttribute","containerClass","selectedClass","dropdownClass","options","JSON","parse","e","choices","searchPlaceholderValue","searchFields","itemSelectText","classNames","containerOuter","containerInner","listDropdown","list","listSingle","groupHeading","openState","input","item","itemSelectable","activeState","setChoices","setValueByChoice","disable","destroy","init","push","forEach","instance"],"mappings":";;;;;;;;AAAA;;;;;;;;AAEA,IAAIA,YAAY,EAAhB;;IAEMC,S;;AAEF;;;;;;;AAOA,uBAAYC,MAAZ,EAAoB;AAAA;;AAChB,aAAKA,MAAL,GAAcA,MAAd;;AAEA,YAAMC,gBAAgB,KAAKD,MAAL,CAAYE,OAAZ,CAAoBC,OAApB,IAA+B,EAArD;AACA,YAAMC,WAAW,KAAKJ,MAAL,CAAYK,YAAZ,CAAyB,UAAzB,KAAwC,KAAzD;AAJgB,8BASZ,KAAKL,MAAL,CAAYE,OATA;AAAA,oDAMZI,cANY;AAAA,YAMZA,cANY,yCAMK,uBANL;AAAA,oDAOZC,aAPY;AAAA,YAOZA,aAPY,yCAOI,eAPJ;AAAA,oDAQZC,aARY;AAAA,YAQZA,aARY,yCAQI,yCARJ;;;AAWhB,YAAIC,gBAAJ;AACA,YAAI;AACAA,sBAAUC,KAAKC,KAAL,CAAW,KAAKX,MAAL,CAAYE,OAAZ,CAAoBO,OAA/B,CAAV;AACH,SAFD,CAEE,OAAOG,CAAP,EAAU;AACRH,sBAAU,EAAV;AACH;;AAED,aAAKI,OAAL,GAAe,sBAAY,KAAKb,MAAjB,EAAyB;AACpCc,oCAAwB,QADY;AAEpCC,0BAAc,8BAFsB;AAGpCC,4BAAgB,EAHoB;AAIpCC,wBAAY;AACRC,gCAAgBZ,cADR;AAERa,gCAAgBZ,aAFR;AAGRa,8BAAcZ,aAHN;AAIRa,sBAAM,iBAJE;AAKRC,4BAAY,yBALJ;AAMRC,8BAAc,0BANN;AAORC,2BAAW,oBAPH;AAQRC,uBAAO,kBARC;AASRC,sBAAM,iBATE;AAURC,gCAAgB,6BAVR;AAWRC,6BAAa;AAXL;AAJwB,SAAzB,CAAf;;AAmBA,aAAKf,OAAL,CAAagB,UAAb,CAAwBpB,OAAxB,EAAiC,OAAjC,EAA0C,OAA1C,EAAmD,KAAnD;AACA,aAAKI,OAAL,CAAaiB,gBAAb,CAA8B7B,aAA9B;;AAEA,YAAIG,QAAJ,EAAc;AACV,iBAAKS,OAAL,CAAakB,OAAb;AACH;AACJ;;AAED;;;;;;;;;kCAKU;AACN,iBAAKlB,OAAL,CAAamB,OAAb;AACH;;;;;;kBAGU;AACXC,QADW,gBACNjC,MADM,EACE;AACTF,kBAAUoC,IAAV,CAAe,IAAInC,SAAJ,CAAcC,MAAd,CAAf;AACH,KAHU;AAIXgC,WAJW,qBAID;AACNlC,kBAAUqC,OAAV,CAAkB;AAAA,mBAAYC,SAASJ,OAAT,EAAZ;AAAA,SAAlB;AACAlC,oBAAY,EAAZ;AACH;AAPU,C","file":"typeahead.js","sourcesContent":["import Choices from 'choices.js';\n\nlet instances = [];\n\nclass Typeahead {\n\n    /**\n     * Typeahead constructor.\n     *\n     * @param {Object} select The select html element to bind to\n     *\n     * @return {void}\n     */\n    constructor(select) {\n        this.select = select;\n\n        const defaultOption = this.select.dataset.default || '';\n        const disabled = this.select.getAttribute('disabled') || false;\n        const {\n            containerClass = 'typeahead form__field',\n            selectedClass = 'form__control',\n            dropdownClass = 'typeahead__list--dropdown form__control',\n        } = this.select.dataset;\n\n        let options;\n        try {\n            options = JSON.parse(this.select.dataset.options);\n        } catch (e) {\n            options = [];\n        }\n\n        this.choices = new Choices(this.select, {\n            searchPlaceholderValue: 'Search',\n            searchFields: 'customProperties.description',\n            itemSelectText: '',\n            classNames: {\n                containerOuter: containerClass,\n                containerInner: selectedClass,\n                listDropdown: dropdownClass,\n                list: 'typeahead__list',\n                listSingle: 'typeahead__list--single',\n                groupHeading: 'typeahead__list--heading',\n                openState: 'typeahead--is-open',\n                input: 'typeahead__input',\n                item: 'typeahead__item',\n                itemSelectable: 'typeahead__item--selectable',\n                activeState: 'is-active',\n            },\n        });\n\n        this.choices.setChoices(options, 'value', 'label', false);\n        this.choices.setValueByChoice(defaultOption);\n\n        if (disabled) {\n            this.choices.disable();\n        }\n    }\n\n    /**\n     * Destroy the choices instance.\n     *\n     * @return {void}\n     */\n    destroy() {\n        this.choices.destroy();\n    }\n}\n\nexport default {\n    init(select) {\n        instances.push(new Typeahead(select));\n    },\n    destroy() {\n        instances.forEach(instance => instance.destroy());\n        instances = [];\n    },\n};\n"]}