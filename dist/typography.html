<!DOCTYPE html>
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE 9]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0" />

	<title> - </title>

	<link href="assets/css/styles.css" rel="stylesheet">
	<link href="assets/css/demo.css" rel="stylesheet">



	<!--Start of Zendesk Chat Script-->
	<script type="text/javascript">
	window.$zopim||(function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=
	d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
	_.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute("charset","utf-8");
	$.src="https://v2.zopim.com/?49vIu3qscYr2sp40IjcXOg8ypK3xwFRh";z.t=+new Date;$.
	type="text/javascript";e.parentNode.insertBefore($,e)})(document,"script");
	</script>
	<!--End of Zendesk Chat Script-->
</head>
<body>

	<img class="svg hidden" src="assets/svg/symbol/svg/sprite.symbol.svg" alt="">

	<!--[if lt IE 9]>
		<div class="browsehappy">
			<p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
		</div>
	<![endif]-->

	<div class="global-wrapper">
		<header role="header" class="demo-header">
			<div class="container">
				<a class="demo-logo-main" href="/">
					<img src="assets/img/pod-point-logo.svg" alt="POD Point">
				</a>
			</div>
		</header><div data-page="typography">
	<header class="demo-section-heading">
		<div class="container content-block">
			<h2>Typography</h2>
		</div>
	</header>


	<!-- HEADINGS -->
	<section>
		<header class="demo-section-sub-heading">
			<div class="container">
				<h3>Headings</h3>
			</div>
		</header>
		<div class="container content-block">
			<div class="rich-text">
				<h1>Heading 1 style</h1>
				<h2>Heading 2 style</h2>
				<h3>Heading 3 style</h3>
				<h4>Heading 4 style</h4>
				<h5>Heading 5 style</h5>
				<h6>Heading 6 style</h6>
			</div>
		</div>
	</section>


	<!-- PARAGRAPHS -->
	<section>
		<header class="demo-section-sub-heading">
			<div class="container">
				<h3>Paragraphs</h3>
			</div>
		</header>
		<div class="container content-block">
			<div class="rich-text">
				<p class="font-style-large"><strong>This paragraph is large font style.</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque non nunc in augue laoreet elementum quis dictum tellus. Phasellus vulputate facilisis lorem, a ornare ligula cursus eget. Nunc iaculis nulla nec semper aliquet. Donec libero est, congue in felis. Maecenas consectetur tortor suscipit, finibus odio et, feugiat turpis. Donec hendrerit vel dolor in suscipit. Sed nec ullamcorper arcu.</p>

				<p><strong>This paragraph is base font style.</strong> Aenean sapien est, convallis sit amet euismod sit amet, porttitor at quam. Suspendisse consectetur nulla odio, et fringilla magna feugiat et. Quisque nec est non <a href="#">inline link</a> ullamcorper condimentum. Sed sagittis cursus semper. Aenean feugiat, nisl quis scelerisque rhoncus, orci elit consequat arcu, et dictum sapien risus id lectus. Nam risus arcu, malesuada id lectus eget, pretium blandit mi. Quisque molestie, sem nec rhoncus porttitor, lectus libero pretium mi, et mattis mauris erat at tellus. Sed ultricies dignissim volutpat.</p>

				<p class="font-style-small"><strong>This paragraph is small font style.</strong> Sed sagittis cursus semper. Aenean feugiat, nisl quis scelerisque rhoncus, orci elit consequat arcu, et dictum sapien risus id lectus. Nam risus arcu, malesuada id lectus eget, pretium blandit mi. Quisque molestie, sem nec rhoncus porttitor, lectus libero pretium mi, et mattis mauris erat at tellus. Sed ultricies dignissim volutpat.</p>
			</div>
		</div>
	</section>


	<!-- UNORDERED LISTS -->
	<section>
		<header class="demo-section-sub-heading">
			<div class="container">
				<h3>Unordered Lists</h3>
			</div>
		</header>
		<div class="container content-block">
			<div class="rich-text">
				<ul>
					<li>In non lacus facilisis, sodales mi sed, ultrices nibh. Maecenas non dolor tincidunt, pharetra leo sit amet, consequat elit. Nulla ac magna ultricies, suscipit nisl vitae, luctus nulla.</li>
					<li>Donec accumsan placerat metus, eu pretium diam semper sagittis. Aliquam nec ligula massa. Praesent ac massa velit. Sed laoreet lectus ac nibh finibus varius. Aenean pulvinar malesuada nulla id finibus.
						<ul>
							<li>Etiam tincidunt magna in arcu accumsan consequat. Vivamus blandit massa gravida augue semper volutpat.</li>
							<li>Sed sagittis cursus semper. Aenean feugiat, nisl quis scelerisque rhoncus, orci elit consequat arcu.</li>
						</ul>
					</li>
					<li>Etiam tincidunt magna in arcu accumsan consequat. Vivamus blandit massa gravida augue semper volutpat. Duis quis aliquet ligula, quis varius elit. Quisque consequat purus tincidunt tempus dapibus.</li>
				</ul>
			</div>
		</div>
	</section>


	<!-- ORDERED LISTS -->
	<section>
		<header class="demo-section-sub-heading">
			<div class="container">
				<h3>Ordered Lists</h3>
			</div>
		</header>
		<div class="container content-block">
			<div class="rich-text">
				<ol>
					<li>In non lacus facilisis, sodales mi sed, ultrices nibh. Maecenas non dolor tincidunt, pharetra leo sit amet, consequat elit. Nulla ac magna ultricies, suscipit nisl vitae, luctus nulla.</li>
					<li>Etiam tincidunt magna in arcu accumsan consequat. Vivamus blandit massa gravida augue semper volutpat. Duis quis aliquet ligula, quis varius elit. Quisque consequat purus tincidunt tempus dapibus.</li>
					<li>Donec accumsan placerat metus, eu pretium diam semper sagittis. Aliquam nec ligula massa. Praesent ac massa velit. Sed laoreet lectus ac nibh finibus varius. Aenean pulvinar malesuada nulla id finibus.</li>
				</ol>
			</div>
		</div>
	</section>
</div>
	</div>

	<script src="assets/js/script.js"></script>

	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="https://d3js.org/queue.v1.min.js"></script>
	<script src="https://d3js.org/topojson.v1.min.js"></script>
	<script src="assets/js/data/chargeData.js"></script>
	<script src="assets/js-plugins/gridmap.js"></script>

	<script>
		var mapElement = document.querySelector("#gridmap");
		var markerHolder = document.getElementById('markerHolder');

		if (mapElement) {
			var timeDelay = 3500; // time in milliseconds between new charges appearing on the map
			var mapWidth = 460;
			var mapHeight = 267; // these values set the physical size of the map on the page
			var mapDotStepSize = 6; // this sets size of the map dots
			var mapLonLeft = -10.65; // enter the longitude in degrees on left edge of map, by comparing with Google Maps
			var mapLonRight = 20.01; // enter the longitude in degrees on right edge of map
			var mapLatBottom = 49.3; // enter the latitude in degrees on bottom edge of map
			var lastHighlightedDot = [];

			// these values set scale and boundaries of the map
			var s = 1342, t = [168, 1382];

			var projection = d3.geo.azimuthalEqualArea().scale(s).translate(t).clipAngle(180).precision(1),
	        path = d3.geo.path().projection(projection);

			queue()
				.defer(d3.json, "assets/js/data/geo-data/eu.json")
				.await(ready);

			getRandomInt = function(min, max) {
				return Math.floor(Math.random() * (max - min + 1)) + min
			}

			function ready(error, eu) {
				// var features =  topojson.feature(us, us.objects.counties).features;
				var features =  topojson.feature(eu, eu.objects.europe).features;
				// generate some random data
				var data = d3.map(); // data is a d3.map !!
				var j;
				for (j = 0, len = features.length; j < len; j++) {
					data.set(features[j]["id"], getRandomInt(1,5));
				}

				chart = new gridmap()
					.data(data)
					.width(mapWidth)
					.height(mapHeight)
					.key("id")
					.side(mapDotStepSize) // change this to make dots larger or smaller
					.isDensity(true)
					.projection(projection)
					.features(features)
					.fill("#CCCCCC");

				d3.select("#gridmap").call(chart);
			}

			function showMarker(x, y, kw, saving) {
				var lastHighlightedDot = [x, y];
				var mapPoint = document.querySelectorAll('circle[cx="' + x + '"][cy="' + y + '"]');

				if (mapPoint.length) {
					mapPoint[0].classList.add('gridmap-dot-selected');
					var kwText = document.getElementById('kw');
					kwText.innerHTML = kw;

					savingText = document.getElementById('saving');
					savingText.innerHTML = saving;

					markerHolder.style.left = (x - 32) + 'px';
					markerHolder.style.top = (y - 32) + 'px';
					markerHolder.style.visibility = 'visible';
					markerHolder.classList.add('bulge-appear');
				} else {
					nextCharge();
				}
			}

			function hideMarker() {
				if (lastHighlightedDot[0]) {
					mapPoint = document.querySelectorAll('circle[cx="' + lastHighlightedDot[0] + '"][cy="' + lastHighlightedDot[1] + '"]');
					if (mapPoint.length) {
						mapPoint[0].classList.remove('gridmap-dot-selected');
					}
				}
				markerHolder.classList.remove('bulge-appear');
				markerHolder.style.visibility = 'hidden';
				void markerHolder.offsetWidth; // workaround to force browser to reflow so bulge animation class works again next time
				lastHighlightedDot = [];
			}

			Number.prototype.roundTo = function(num) {
				var resto = this%num;
				if (resto <= (num/2)) {
					return this-resto;
				} else {
					return this+num-resto;
				}
			}

			// adapted from http://stackoverflow.com/a/27313080
			function convertLatLongToDot(latitude, longitude) {
				var mapLonDelta = mapLonRight - mapLonLeft;
				var mapLatBottomDegree = mapLatBottom * Math.PI / 180;
				var x = (longitude - mapLonLeft) * (mapWidth / mapLonDelta);
				latitude = latitude * Math.PI / 180;
				var worldMapWidth = ((mapWidth / mapLonDelta) * 360) / (2 * Math.PI);
				var mapOffsetY = (worldMapWidth / 2 * Math.log((1 + Math.sin(mapLatBottomDegree)) / (1 - Math.sin(mapLatBottomDegree))));
				var y = mapHeight - ((worldMapWidth / 2 * Math.log((1 + Math.sin(latitude)) / (1 - Math.sin(latitude)))) - mapOffsetY);
				var dotX = x.roundTo(mapDotStepSize);
				var dotY = y.roundTo(mapDotStepSize);

				return [dotX, dotY];
			}

			function showChargeOnMap(latitude, longitude, kw, saving) {
				var dotCoords = convertLatLongToDot(latitude, longitude);
				showMarker(dotCoords[0], dotCoords[1], kw, saving);
			}

			function nextCharge() {
				hideMarker();
				var charge = chargesData[Math.floor(Math.random() * chargesData.length)];
				showChargeOnMap(charge[0], charge[1], charge[2], charge[3]);
			}

			// setInterval(nextCharge, timeDelay);

		}
</script>

</body>
</html>
